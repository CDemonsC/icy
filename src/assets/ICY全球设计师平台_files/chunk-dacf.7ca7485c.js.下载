(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-dacf"],{"3cf5":function(t,e,i){"use strict";var o=i("b680"),s=i.n(o);s.a},"54c2":function(t,e,i){"use strict";var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"cy-loadmore"},[i("div",{ref:"content",staticClass:"cy-loadmore-content",class:{"is-dropped":t.topDropped}},[t._t("top",[i("div",{staticClass:"cy-loadmore-top"},[i("div",{staticClass:"load-line"}),i("div",{ref:"logo",staticClass:"load-logo"},[i("logo-animation")],1)])]),t._t("default")],2)])},s=[],a=(i("6b54"),i("c5f6"),{name:"icy-loadmore",props:{maxDistance:{type:Number,default:0},distanceIndex:{type:Number,default:2},topDistance:{type:Number,default:70},useMinLoadTime:{type:Boolean,default:!0}},data:function(){return{loadTime:0,minLoadInterval:1200,uuid:null,translate:0,scrollEventTarget:null,topDropped:!1,direction:"",startY:0,startScrollTop:0,currentY:0,topStatus:"",needPreventDefault:!1,loadStartTimer:null,maxTimeout:8e3}},methods:{onTopLoaded:function(t){var e=this;if(t===this.uuid){this.loadStartTimer&&(clearTimeout(this.loadStartTimer),this.loadStartTimer=null);var i=+new Date-this.loadTime;i>this.minLoadInterval||!this.useMinLoadTime?(this.topStatus="pull",this.translate=0,this.setLogoVisible(!1),this.updateDom()):setTimeout(function(){e.translate=0,e.topStatus="pull",e.setLogoVisible(!1),e.updateDom()},this.minLoadInterval-i)}},setLogoVisible:function(t){this.$refs.logo&&(this.$refs.logo.style["display"]=t?"block":"none")},getScrollEventTarget:function(t){var e=t;while(e&&"HTML"!==e.tagName&&"BODY"!==e.tagName&&1===e.nodeType){var i=document.defaultView.getComputedStyle(e).overflowY;if("scroll"===i||"auto"===i)return e;e=e.parentNode}return window},getScrollTop:function(t){return t===window?Math.max(window.pageYOffset||0,document.documentElement.scrollTop):t.scrollTop},bindTouchEvents:function(){this.$el.addEventListener("touchstart",this.handleTouchStart),this.$el.addEventListener("touchmove",this.handleTouchMove),this.$el.addEventListener("touchend",this.handleTouchEnd)},removeTouchEvents:function(){this.$el.removeEventListener("touchstart",this.handleTouchStart),this.$el.removeEventListener("touchmove",this.handleTouchMove),this.$el.removeEventListener("touchend",this.handleTouchEnd)},init:function(){this.topStatus="pull",this.scrollEventTarget=this.getScrollEventTarget(this.$el),this.bindTouchEvents()},handleTouchStart:function(t){this.cancelLoadmore=!1,this.startY=t.touches[0].clientY,this.startScrollTop=this.getScrollTop(this.scrollEventTarget),"loading"!==this.topStatus&&(this.topStatus="pull",this.topDropped=!1)},handleTouchMove:function(t){if("down"===this.direction&&0===this.getScrollTop(this.scrollEventTarget)&&"loading"!==this.topStatus&&(t.preventDefault(),t.stopPropagation()),!this.cancelLoadmore)if(this.startY<this.$el.getBoundingClientRect().top||this.startY>this.$el.getBoundingClientRect().bottom)this.cancelLoadmore=!0;else{this.currentY=t.touches[0].clientY;var e=(this.currentY-this.startY)/this.distanceIndex;this.direction=e>0?"down":"up","up"!==this.direction?("down"===this.direction&&0===this.getScrollTop(this.scrollEventTarget)&&"loading"!==this.topStatus?(t.preventDefault(),t.stopPropagation(),this.maxDistance>0?this.translate=e<=this.maxDistance?e-this.startScrollTop:this.translate:this.translate=e-this.startScrollTop,this.translate<0&&(this.translate=0),this.updateDom(),this.topStatus=this.translate>=this.topDistance?"drop":"pull"):this.cancelLoadmore=!0,this.needPreventDefault=!0):this.cancelLoadmore=!0}},handleTouchEnd:function(){this.needPreventDefault&&(event.preventDefault(),event.stopPropagation(),this.needPreventDefault=!1),this.cancelLoadmore&&(this.translate="0",this.topStatus="pull",this.direction="",this.updateDom()),this.cancelLoadmore=!1,this.loadTime=+new Date,"down"===this.direction&&0===this.getScrollTop(this.scrollEventTarget)&&this.translate>0&&(this.topDropped=!0,"drop"===this.topStatus?(this.setLogoVisible(!0),this.translate="100",this.topStatus="loading",this.$emit("load",this.uuid),clearTimeout(this.loadStartTimer),this.loadStartTimer=setTimeout(function(){location.reload()},this.maxTimeout)):(this.translate="0",this.topStatus="pull"),this.updateDom()),this.direction=""},manualTriggerLoad:function(){this.topDropped=!0,this.setLogoVisible(!0),this.translate="100",this.updateDom(),this.topStatus="loading",this.$emit("load",this.uuid),clearTimeout(this.loadStartTimer),this.loadStartTimer=setTimeout(function(){location.reload()},this.maxTimeout),this.direction=""},updateDom:function(){this.$refs.content&&(0!=this.translate?(this.$refs.content.style["transform"]="translate3d(0, "+this.translate+"px, 0)",this.$refs.content.style["-webkit-transform"]="translate3d(0, "+this.translate+"px, 0)"):(this.$refs.content.style["transform"]="initial",this.$refs.content.style["-webkit-transform"]="initial"))}},mounted:function(){this.uuid=Math.random().toString(36).substring(3,8),this.init()},destroyed:function(){this.removeTouchEvents()}}),n=a,l=(i("3cf5"),i("2877")),r=Object(l["a"])(n,o,s,!1,null,"96b95afe",null);r.options.__file="loadmore.vue";e["a"]=r.exports},b680:function(t,e,i){}}]);
//# sourceMappingURL=chunk-dacf.7ca7485c.js.map